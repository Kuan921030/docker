# 國立臺灣大學賽車隊軟體研發日誌
##### 組別: 電系組
##### 負責人: 羅紀翔
##### 次系統: *填入次系統*
##### 次系統編號: *填入次系統編號*
##### 軟體名稱: docker_virtual_environment
##### 存放位置: [github](https://github.com/NTURacingTeam/docker)
##### 開始設計日期: 2022/7/28
##### 目前版本: 2.1
##### 最後更動時間: 2022/8/4
---
## 完整工程目標
Virtual environment are commanly used in order to avoid unnecessary environment setups as a result of different computers with different software installed. Here docker is adoped as a comprehensive virtual environment that is applicable to every software.

## 程式架構
In order to simplify the use of docker, the software uses bash script with prompt to ask user what do they want to do, and then execute docker command accrodingly. For more information for how to use, please refer to `Usage` section in `README.md`.

The software also provides custom dockerfile in `Dockerfile` to build custom images that fit our needs. For more information for what is installed, please refer to `Image environment` section in `README.md`.

## 使用的函式庫
[matlab package manager](https://github.com/mathworks-ref-arch/matlab-dockerfile)

## 測試環境
- bash 5.0.17(1)-release (x86_64-pc-linux-gnu)
- docker 20.10.17, build 100c701

##### 電腦硬體:
- asus tuf gaming a15 FA506II-0031A 4800H

##### 作業系統:
- ubuntu20.04

##### 編譯器版本(python版本):
- N/A

## 2.2版更動內容
- Minor bug fix
  - Give /usr/share/matlab/licenses permission for everone as matlab is installed in root user
- Make the script useable for hosts without nvidia docker support

## 2.2版更動原因
- Matlab have to have permission to /usr/share/matlab/licenses in order to activate
- The script was original only usable for hosts with nvidia docker support

## 2.2版更動時間:
2022/8/4

## 2.2版測試結果
### ros_matlab
Permission problem resolved successfully
### Create container with nvidia docker support
run
```bash=
./start_container create ros roe_matlab
```
with nvidia docker support
created successfully
### Create container without nvidia docker support
run
```bash=
./start_container create ros roe_matlab
```
without nvidia docker support
created successfully
## 2.2版改進方向
- Not tested on raspberry pi yet

---
## 2.1版更動內容
- Minor bug fix
  - Reverse the order of sourcing ros and ros workspace in .bashrc
- Reformat 軟體日誌 to newer version

## 2.1版更動原因
- Sourcing ros workapsce before sourcing ros have no effect

## 2.1版更動時間:
2022/8/4

## 2.1版測試結果
### ros_matlab
Auto-sourcing ~/ws/devel/setup.bash Successfully

### fun_time_with_arthur
Auto-sourcing ~/ws/devel/setup.bash Successfully

## 2.1版改進方向
- Currently creating a container always uses some specific configuration (always using gpu), will be changed in the next version
- Not tested on raspberry pi yet

---
## 2.0版更動內容
- Added three other dockerfiles for different needs, including
  - ros_host: image with ros for desktop use
  - ros_matlab: image with ros and matlabfor desktop use
  - ros_rpi: image with ros for use on raspberry pi
- Rewrite dockerfiles to shorten the build stepts

## 2.0版更動原因
- Add other images for different needs, especially ros_matlab for future developments
- Rewrite dockerfiles for better performances, please checkout [Better practice for writting dockerfiles](https://docs.docker.com/develop/develop-images/dockerfile_best-practices/)

## 2.0版更動時間:
2022/7/30

## 2.0版測試結果
### Test building image
runing
```bash=
./build_image fun_time_with_arthur
./build_image ros_matlab
```
Built successfully

## 2.0版改進方向
- Currently creating a container always uses some specific configuration
- Not tested on raspberry pi yet

---
## 1.0版更動時間:
2022/7/28

## 1.0版測試結果
### Test building image
runing
```bash=
./build_image fun_time_with_arthur
```
#### Without an image with same name and tag `latest`
Built successfully
#### With an image with same name and tag `latest`
Built successfully

### Test create/run/shell/stop container
runing
```bash=
./start_container COMMAND CONTAINER_NAME [IMAGE_NAMME]
```
All worked successfully

## 1.0版改進方向
- Currently creating a container always uses some specific configuration, which should be change to be configuratable.
- The `ros_uuv_rpi` image should be updated, tested and documented in `README.md`.
- Should add an image with only desktop ros.
